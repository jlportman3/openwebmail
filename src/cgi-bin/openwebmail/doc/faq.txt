
Q: I got "Internal server error" when running Open WebMail?
   I got "can not do setuid" error?
   I got "Software error: Can't locate etc/openwebmail.conf in @INC" error?
A: There are many possible answers...

   1. Please check you have installed a complete set of perl 5.005 or above.
      And You uncompress the openwebmail-1.xx.tgz with proper parameter.
      It should be "tar -zxvBpf openwebmail-1.xx.tgz"

   2. Your openwebmail scripts may have wrong owner or mode.
      The owner and mode of openwebmail.pl, openwebmail-prefs.pl, 
      checkmail.pl, spellcheck.pl should be
      mode=4555
      owner=root
      group=mail

   3. Your perl may be compiled with suid ability disabled.
      a. check if you have a executable of suidperl, 
         then 'chmod 4555 suidperl'
         and change #!/usr/bin/perl to the path of this suidperl
      b. Or recompile your perl with suid enabled

   4. The MIME::Base64 or CGI module on your system may be too old
      a. install MIME-Base64-2.12.tar.gz
      b. install CGI.pm-2.74.tar.gz

ps: In most cases, you can run the './openwebmail.pl' in text terminal
    to get more information about the error.

Q: I got "Can't check filesystem of script "./openwebmail.pl" for nosuid"?
A: Your openwebmail may be installed on a filesystem mounted nosuid.
   Please remove the nosuid parameter from /etc/fstab or install openwebmail
   to other filesystemm.

ps: 'man mount' for more information about nosuid

Q: The login menu showed okay, but I always got login failure?
A: Check auth_module option in openwebmail.conf:

   If it is 'auth_unix.pl', 
   check if $unix_passwdfile and $unix_passwdmkdb in auth_unix.pl are correct

   If it is 'auth_pam.pl', 
   make sure you have followed the instructions of 'PAM SUPPORT' in readme.txt.
   If you still got login failure, you can debug the pam module by:
   1. modify auth_pam.pl
      uncomment all the lines of log_time(...)
   2. login to openwebmail
   3. check the /tmp/openwebmail.debug for more information.

Q: I got "Couldn't open XXX-session-0.370606494136155!" error after login?
A: You openwebmail-1.xx.tgz was uncompressed with improper parameter.
   It should be "tar -zxvBpf openwebmail-1.xx.tgz"

Q: I got "Software error: Can't locate MIME/Base64.pm in @INC"?
A: Please download MIME-Base64-2.12.tar.gz and install

   cd /tmp
   tar -zxvf MIME-Base64-2.12.tar.gz
   cd MIME-Base64-2.12
   perl Makefile.PL
   make
   make install

Q: I got "can't open /var/log/openwebmail.log" error?
A: Please check the openwebmail.log permission, it should be
   owner=root, group=mail, mode=660

Q: The 'From' field of my message contained only 'username@'?
A: You may has wrong setting of domainname in openwebmail.conf
   1. For version older than 1.41 ,
      please be sure to use '' for a text string of hostname
      or use `` for the program (ex: /bin/hostname)
   2. For version 1.50 or above,
      please list all domainnames seperated with comma.
      or use auto for this setting, openwebmail will call '/bin/hostname'
      to get the fqdn of your host.

Q: How can I use multiple virtual domains with openwebmail?
A: First, you have to decide if you want to let user defines multiple 
   from email address by themself. 
   If yes, set 'enable_setfromemail' to 'yes', else set it to 'no'

   Second, you have to decide if you want to let user pick up the domainname
   from all domainnames supported by your mail server or you want to statically
   specify domainname used by each user.

   To let user to pick doaminname from all supported domainnames, you have to 
   specify all domainnames in the option 'domainnames' in openwebmail.conf.

   To statically specify domain name used by each user, you have to define the
   mappping from email address to userid in /etc/mail/virtusertable.
   For example, a line like below

   guest@virtual.com	guest

   will make the user guest using the domainname 'virtual.com'
   
Q: What happens if users with same usernames exist in different domains?
A: You have to create different accounts for each user.

   For example, you have 3 users with name 'john':
   john@company1.com, john@company2.com and john@company3.com.

   You need to create 3 accounts for these 3 johns and mapping the 3 email address
   to the created accounts in /etc/mail/virtusertable

   john@company1.com	john1
   john@company2.com	john2
   john@company3.com	john3

   Then user can login with full email address, ex: 'john@company1.com'.

Q: If user login with only username instead of full email address,
   which user is choosed in above case?
A: Since openwebmail is unable determine which user is the right one, 
   it will return 'no such user'. But if there is only one virtual user john
   defined in /etc/mail/virtusertable

   john@company1.com	john1

   The john@company1.com will be choosed even user logins with only 'john'

Q: What happens if a real userid 'john' exists in above case?
A: Openwebmail will choose real userid 'john' first.
   But if the /etc/mail/virtusertable tables is defines as below

   john@company1.com	john

   Then john@company1.com will be choosed.

Q: Some of my messages were moved to trash folder automatically?
A: Your messages were either filtered by 'global filter rule' or 
   'faked smtp message filter'. 

   Global filter will filter messages with know virus attachments. The global
   filter rules are defined in the file global_filterbook
   (global_filterbook is defined as %ow_etcdir%/global_filterbook in 
    openwebmail.conf.)

   The 'faked smtp message filter' will filter messages that have a faked smtp
   source, those messages are often from spammers. 'faked smtp filter' is 
   default enabled and can be changed in openwebmail.conf. The user can also 
   disable it in the user preference. 

Q: What are "messages with faked smtp"?
A: In short, they are messages coming from mail servers that fake their 
   name from other machines. 

   Where is a message coming from?

   A message sent from machine A to machine B may have 2 cases:
   a. A ---> M1 ---> M2 ---> B (M1, M2 are mail servers)
      In this case, openwebmail use M1 as the from server. 
      Since most of the time, A is windows machine using outlook.
   b  A -------------------> B
      In this case, openwebmail use A as the from server.

   How do we know if a from server fakes his name?   

   Each host may have 3 names in the mail header:
   $byas - name used by this server when saying hello to incoming connection
   $relay - name used by this server when relaying mail through other host
   $connectfrom - ip and name detected by other hosts resolved from DNS system
                  when receiving connection from this server

   A from host is faking his name if
   a. $byas doesn't equal to $relay, and
   b. $connectfrom doesn't equal to $relay, and
   c. $connectfrom has different domain than the desition server B, and
   d. $connectfrom is not private IP

Q: I still want the filtered messages, 
   how can I disable faked smtp filter completely?
A: 1. Set default_filter_fakedsmtp to 'no' in openwebmail.conf
      This will unset the default fakedsmtp filter for all newly created user
   2. Uncheck the faked smtp filter option in user preference
      This will disable the fakedsmtp filter for a specific user

Q: I could not add attachments?
   Open WebMail was hanged when I pressed the 'add' button to add attachments?
A: 1. Your CGI or MIME-Base64 module may be too old,
      Please download CGI.pm-2.74.tar.gz and MIME-Base64-2.12.tar.gz in
      http://turtle.ee.ncku.edu.tw/openwebmail/download/packages/ 
      and install them to your system.
   2. Your proxy may limit the size of a POST request.
      Try to add attachments with no proxy setting in your browser.
      If you are the administrator of the squid proxy server,
      please set the request_body_max_size option to a larger value.

Q: Attachments disappeared when I forwarded a message?
A: Check permission of the following directories
   cgi-bin/openwebmail/etc          - owner=root, group=mail, mode=755
   cgi-bin/openwebmail/etc/sessions - owner=root, group=mail, mode=770
   cgi-bin/openwebmail/etc/users    - owner=root, group=mail, mode=770

Q: The permission of cgi-bin/openwebmail/etc is correct but attachments 
   still disappeared in message forwarding?
A: Hmmm, please upgrade to the latest version. 
   Some old version(1.03,1.04) has little problem in attachment handling.

Q: When I checked 'edit folder menu', I found some folders were empty but 
   took disk space?
A: The disk space occupied by a folder shown in 'edit folder menu' includes
   the size of a folder and its index. Though folder is empty, the folder 
   index still has some data structure to maintain.

Q: When I clicked 'spell check' button, I got "Internal Server error" in new
   window?
A: Please be sure that you have installed ispell-3.1.20.tar.gz

Q: Ispell has been correctly installed, but spellcheck still doesn't work?
A: The spellcheck in old version of openwebmail doesn't work on RedHat 7.x,
   please upgrade your openwebmail to the latest version.

Q: Why is spellcheck.pl a suid root program?
A: Because it needs to read the preference file, ~/mail/.openwebmailrc, 
   of different users to get their langage and dictionary setting.

Q: I have problems in reading some mail....
A: please check 
   http://turtle.ee.ncku.edu.tw/openwebmail/download/doc/changes.txt
   to see if any update fixes your problem and download the 
   openwebmail-current.tgz

Q: I got 'Sorry, there was a problem sending your message' error?
A: please check if sendmail option in openwebmail.conf has pointed to correct 
   program

ps:If you are using postfix as an replacement for sendmail, you have to
   use its compatiable wrapper 'sendmail' instead of 'postfix'.
   Also remember to change the mode of main.cf of postfix to 644,
   thus it could be read by all users. 
   (thanks to Rex_Chen, rex@ispro.com.tw)

Q: The autoreply function doesn't work?
A: Please be sure that vacationinit and vacationpipe in openwebmail.conf 
   have pointed to the path where the vacation program is.

   If the path is correct, you can do debug with the -d option

   1. choose a user, enable his autoreply in openwebmail user preference
   2. edit the ~user/.forward file,
      add the '-d' option after vacation.pl
   3. send a message to this user to test the autoreply
   4. check the /var/tmp/vacation.debug for possible error information

   Please add this '-d' parameter to the vacationpipe in openwebmail.conf.

   vacationpipe		/usr/local/www/cgi-bin/openwebmail/vacation.pl -d -t60s

   Then send a testing mail to someone who enabled the autoreply.
   The debugging information will be written into /var/tmp/vacation.debug.

Q: When I enable autoreply feature, others get "Returned mail: see
   transcript for details" instead of my autoreply message?
A: Your sendmail may be configured with Sendmail Restricted SHell or smrsh.
   vacation.pl file needs to be added to smrsh.

   If you are using RedHat 7.1, you may link vacation.pl to /etc/smrsh/

   cd /etc/smrsh
   ln -s /var/www/cgi-bin/openwebmail/vacation.pl /etc/smrsh/vacation.pl
   (thanks to Emir Litric, elitric@yahoo.com)

Q: My SENT folder shows -1 or other negative message size rather then
   regular message size?
A: This problem occurs if you installed Open WebMail on the same partition 
   where quota is enabled. Open WebMail uses temp files in 
   cgi-bin/openwebmail/etc/sessions folders.
   Solution is to move sessions folder to another partition with no Quota.

   Please read RedHat-README.txt for detailed explanation on setting up
   this, since this problem mostly occurs on RedHat Linux 6.2 and bellow. 
   (thanks to Emir Litric, elitric@yahoo.com)

Q: My openwebmail was okay, but I got "Your request didn't contain the proper 
   session ID cookie -- access denied!" in these days?
A: Openwebmail puts user uploaded attachments in cgi-bin/openwebmail/etc/sessions/ 
   temporarily. User will get error if there is no space left on the partion where
   cgi-bin/openwebmail/etc/sessions/ lives or user has exceeded his disk quota.

   Please move cgi-bin/openwebmail/etc/sessions to a larger parition with
   diskquota disablaed, then create a symbolic link to that new directory

   cd /new_palce

   mkdir sessions
   chmod 770 sessions
   chown 0 sessions
   chgrp mail sessios

   cd yourweb_cgi-bin/openwebmail/etc/
   rm -Rf sessions
   ln -s /new_place/sessions .

Q: The Open WebMail is very slow on my machine?
A: It depends on how you define the "slow". 

   The response time of Open WebMail in normal operation would be:
   6 second on a p133 machine.
   3 second on a p200mmx machine.
   1 second on a celeron300 machine.

ps: Some operations would take more time than normal operation, for example:
    indexing on a large folder, adding large attachment to a message.

   It is recommended that you install Open WebMail on a medium-sized machine.
   (ex: Celeron 300 with 128MB ram). Actually it runs well on a pentium 200mmx
   machine only if you have enough ram installed.

   There is an analysis of memory usage of Open WebMail available at
   http://turtle.ee.ncku.edu.tw/openwebmail/download/doc/memory.usage

Q: How can I report problem?
A: If your Open WebMail doesn't work, please post your problem on
   openwebmail forum http://sourceforge.net/forum/forum.php?forum_id=108433
   with the following information

   OS
   Perl Version
   your openwebmail.conf
   the ls -l of the perl executable used in your openwebmail.pl
   the ls -l of your cgi-bin/openwebmail and cgi-bin/openwebmail/etc
   the ls -la of the ~user/mail/
   the error message in your browser

   If your Open WebMail works but it shows strange output for some messages,
   please forward the message as an attachment to us
   (openwebmail@turtle.ee.ncku.edu.tw)
   ps: clicking the 'forward as attachment' icon in message reading menu

Q: Can I call openwebmail from my programs with username/password specified?
A: You can call the openwebmail with url
   http://server/openwebmail.pl?action=login&loginname=USER&password=PASS

   But this is somewhat dangerous since the loginname and password will
   be displayed at the URL line on the user's browser.

Q: How can I set an alias or link to the openwebmail script so users can 
   type in a shorter url?
A: Please create a file, index.html, like below. Either a or b is okay. 
   Than put this index.html to the location mapped by the url you want.
   a.
   ----------------------------------------
   <html><head>
   <meta http-equiv="Refresh" 
   content="0;URL=http://your_server/cgi-bin/openwebmail/openwebmail.pl">
   </head></html>
   ----------------------------------------
   b.
   ---------------------------------------
   <html>
   <body onload=
   "window.open('http://your_server/cgi-bin/openwebmail/openwebmail.pl','_top')">
   </body>
   </html>
   ----------------------------------------

Q: Does Open WebMail support maildir and vpop3mail user by Qmail?
A: No, It doesn't.

Q: Will Open WebMail support maildir and vpop3mail used by Qmail?
A: Maybe, but it won't be implemented in the near future since we don't use
   qmail on our mail server. It is said that qmail has a 'mbox' compatible 
   mode, you may use that mode with openwebmail.

Q: Can Open WebMail be used with mod_perl?
A: No, lots of code needs to be changed to make Open WebMail a good behavior
   program under mod_perl. Currently, it can not be used with mod_perl. 

Q: Can I use Open WebMail in a commercial web site? 
A: Yes. Open WebMail is GPLed software (please see copyright.txt for 
   detail of GPL). You can use or distribute it freely only if

   Any improvement of Open WebMail or any product based on Open WebMail 
   must be released to the public in source form.

ps: We would be happy if you mail us a message that your commercial web site
    is using Open WebMail. It may be put into the web page as some kind of 
    advertisements :)
   

11/05/2001 

openwebmail@turtle.ee.ncku.edu.tw
