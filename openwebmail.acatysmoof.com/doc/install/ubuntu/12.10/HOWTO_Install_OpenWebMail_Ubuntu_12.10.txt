Overview
========
ubuntu-12.10-desktop-i386.iso was the installer used. A normal install was performed
with third party software and download updates selected.

Ubuntu 12.10 (Quantal Quetzal) ships with perl 5.14.2 which no longer directly
supports setuid. OpenWebMail can still run on this operating system with the
use of simple c wrappers to enable setuid, even under SELinux.

Mimimum Requirements    Already Installed on Ubuntu 12.10?   How To Tell (as root)
====================    ==================================   =====================
- apache                no                                   which httpd
- wget                  yes (1.13.4)                         which wget
- gcc or cc             yes (4.7.2)                          which gcc
- iconv                 yes (2.15)                           which iconv
- CGI.pm                yes (3.52)                           perl -MCGI -e '{print $CGI::VERSION . "\n"}'
- Text::Iconv           yes (1.7)                            perl -MText::Iconv -e '{print $Text::Iconv::VERSION . "\n"}'
- HTML::Template        no                                   perl -MHTML::Template -e '{print $HTML::Template::VERSION . "\n"}'

A quick method to install the needed items (as root):
apt-get install apache2
apt-get install libhtml-template-perl

Quick Install for Ubuntu 12.10
==============================
# become root
su -

# make tmp dir to unpack openwebmail
mkdir /tmp/openwebmail
cd /tmp/openwebmail

# download -current version
wget http://openwebmail.acatysmoof.com/download/current/openwebmail-current.tar.gz

# unpack it
tar -xvzBpf openwebmail-current.tar.gz

# put it in the apache area
mv cgi-bin/openwebmail /usr/lib/cgi-bin/
mv data/openwebmail /var/www/

# cleanup
cd /usr/lib/cgi-bin/openwebmail
rm -rf /tmp/openwebmail

# create the logfile
touch /var/log/openwebmail.log
chown root:mail /var/log/openwebmail.log

# ONLY if you do not have an index file - use the provided redirect file
cp -p /var/www/openwebmail/redirect.html /var/www/index.html

# update openwebmail.conf
vi etc/openwebmail.conf
change:
ow_cgidir               /usr/local/www/cgi-bin/openwebmail
ow_cgiurl               /cgi-bin/openwebmail
ow_htmldir              /usr/local/www/data/openwebmail
ow_htmlurl              /openwebmail

to:
ow_cgidir               /usr/lib/cgi-bin/openwebmail
ow_cgiurl               /cgi-bin/openwebmail
ow_htmldir              /var/www/htdocs/openwebmail
ow_htmlurl              /openwebmail

# create an auth_unix.conf config file for Ubuntu
cp etc/defaults/auth_unix.conf etc/

# update the auth_unix.conf file
vi etc/auth_unix.conf
change:
passwdfile_plaintext    /etc/passwd
passwdfile_encrypted    /etc/master.passwd
passwdmkdb              /usr/sbin/pwd_mkdb

to:
passwdfile_plaintext    /etc/passwd
passwdfile_encrypted    /etc/shadow
passwdmkdb              none

# create a dbm.conf file for Ubuntu
cp etc/defaults/dbm.conf etc/

# update the dbm.conf config file
vi etc/dbm.conf
change:
dbm_ext           .db

to:
dbm_ext           .pag

# initialize openwebmail
# (.pl files will automatically be C wrapped if perl version is 5.12 or higher)
./openwebmail-tool.pl --init

# update all the openwebmail files to run safely under SELinux
# skip this step if SELinux is disabled on your system
# SELinux is NOT enabled by default in Ubuntu 12.10
chcon -u system_u /var/log/openwebmail.log
chcon -t httpd_sys_script_rw_t /var/log/openwebmail.log
restorecon -R /var/www/{htdocs,cgi-bin}/openwebmail
chcon -R -t httpd_sys_content_t auth etc lib misc modules quota shares
chcon -t httpd_unconfined_script_exec_t /usr/lib/cgi-bin/openwebmail/openwebmail*

# setuid the .pl files
chmod 4755 openwebmail*.pl

# ONLY if you are upgrading from a previous version of OpenWebMail
# do you need to reindex all existing users databases to the new format
# This step can take a while and should be done while no one is accessing
# the system. Access from an old version will force the db to roll back
# to the old format
./openwebmail-tool.pl --alluser --index

# go to the openwebmail page in your browser
http://your.domain/cgi-bin/openwebmail/openwebmail.pl

Questions?
==========
http://openwebmail.acatysmoof.com/archive
